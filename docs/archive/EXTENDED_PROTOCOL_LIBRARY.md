# EXTENDED PROTOCOL LIBRARY (ARCHIVE)

Purpose: Preserve the rich, verbose protocol concepts that were intentionally trimmed or omitted to produce the lightweight RAD TSHIRT v4.0 export. This archive is a design reservoir for future expansion (v4.x hardening, v5.0 evolution). All branded references have been neutralized; content is generalized. Nothing here is active in v4.0 unless explicitly re‑introduced.

## Index
1. Rationale for Trimming
2. Role & Capability Model (Extended)
3. Tool Permission Matrix (Granular)
4. Enforcement Hierarchy (Original Ladder)
5. Context Lifecycle (Detailed Threshold Semantics)
6. Dehydration & Rehydration (Full Capsule + 7‑Level Sequence)
7. Dual‑Mode Documentation (Snapshot vs Dehydration)
8. Specialist Network & Committees (34+ Archetypes)
9. Parallel vs Sequential Decision Framework
10. Outside Reviewer Synthesis Pattern
11. Strike System & Commitment Psychology
12. Permission Escalation Dialogue Pattern
13. Dual Oversight (Primary + Shadow Ops)
14. Real‑World Scenario Patterns (Extended Examples)
15. Three‑Week Implementation Program (Original)
16. Critical Protocols First Set (Iteration History)
17. Pitfalls & Anti‑Patterns (Extended List)
18. Metrics Suite (Full Set + Advanced)
19. Variant Taxonomy Summary
20. Reintroduction Triggers & Risk Matrix
21. Token Cost & Cognitive Load Table
22. Candidate v5.0 Reintegration Plan

---
## 1. Rationale for Trimming
| Dimension | Original State | v4.0 Choice | Reason | Risk of Omission | Reintro Trigger |
|-----------|---------------|------------|--------|------------------|-----------------|
| Protocol breadth | 15+ behavioral layers | 3 core protocols (handoff, communication, cleanup) | Faster adoption | Subtle cultural drift | Onboarding confusion or quality erosion |
| Enforcement sophistication | Strikes, penalties, layered authority | Minimal gating (tests/lint/coverage) | Reduce friction | Slower behavior correction | Repeated policy violations |
| Role taxonomy | 5 primary + 30+ specialists | 5 shirts (PM/LEAD/DEV/QA/OPS) | Clarity | Lost specialization leverage | Parallel scaling demands |
| Context instrumentation | Continuous % reporting & decay modeling | Conceptual narrative only | Lower noise | Hidden context exhaustion | Handoff failures recur |
| Debug committees | Formal parallel orchestration patterns | Mention only | Keep surface area small | Slower multi‑angle debugging | Recurring deep defect latency |
| Security & determinism | Structured gate layers | Deferred | Avoid early false positives | Late discovery of supply chain issues | Security incident / flakiness spikes |

---
## 2. Role & Capability Model (Extended)
Original layering distinguished three tiers:
```
TIER 1: Orchestration Only (PM, Ops Governance)
  - Delegation only; never implement
  - Custodians of context integrity
TIER 2: Hybrid Implementers (Lead, Dev)
  - Implement + coordinate sub‑agents
  - System architecture + integration
TIER 3: Specialists (34+ ephemeral roles)
  - Narrow deep tasks (e.g., performance probe, token optimizer)
  - Non‑delegating execution
```
Table (extended authority surface):
| Role | Core Authority | Escalation Rights | Forbidden Actions | Escalation Cool‑off |
|------|----------------|-------------------|-------------------|---------------------|
| PM | Backlog shaping, delegation | Request temporary tool permission | Direct code edits | 24h after override |
| LEAD | Architecture, refactors | Declare tech debt sprint | Skip tests (emergency) | Must retro justify |
| DEV | Feature implementation | Request infra tweak | Re‑scope requirements | Immediate |
| QA | Test strategy & validation | Block merge on quality | Change product scope | Until issue closed |
| OPS | Process, metrics, infra hygiene | Adjust gating thresholds | Bypass gate silently | Requires logged decision |

Variants not in v4.0: rotating “Shadow PM”, ephemeral “Incident Lead”, “Outside Reviewer”.

---
## 3. Tool Permission Matrix (Granular)
Original matrix tracked tool families vs roles.
| Tool Group | PM | LEAD | DEV | QA | OPS | Notes |
|------------|----|------|-----|----|-----|-------|
| Source edit | ❌ | ✅ | ✅ | ⚠ (tests only) | ✅ | QA edits limited to test fixtures |
| Git push | ⚠ (merge sign‑off only) | ✅ | ✅ | ❌ | ✅ | PM needs override protocol |
| Infra scripts | ❌ | ⚠ | ⚠ | ❌ | ✅ | Lead/Dev require pre‑declared purpose |
| Test execution | ✅ (read only) | ✅ | ✅ | ✅ | ✅ | PM runs for evidence, not authoring |
| Lint/format | ✅ (invoke) | ✅ | ✅ | ✅ | ✅ | |
| Security scan | Read results | Run + interpret | Run | Run | Calibrate allowlist | |
| Coverage diff | View & report | Analyze trends | Optimize hotspots | Validate acceptance | Feed gating | |

Legend: ✅ allowed, ⚠ conditional, ❌ prohibited.

---
## 4. Enforcement Hierarchy (Original Ladder)
```
Human Sponsor
   ↓
Ops Process Steward (was meta)
   ↓
PM (Orchestration gatekeeper)
   ↓
Lead (Architecture authority)
   ↓
Dev / QA (Execution & validation)
   ↓
Specialists (Ephemeral focus roles)
```
Omitted from v4.0: explicit sponsor & shadow oversight layers.

---
## 5. Context Lifecycle (Detailed Threshold Semantics)
Original thresholds:
| Band | % Range | Action Mandate | Allowed New Scope | Handoff Requirement |
|------|---------|----------------|-------------------|---------------------|
| Green | 100–70 | Normal ops | Full | None |
| Yellow | 70–50 | Prefer delegation | Medium | Optional snapshot |
| Orange | 50–30 | Prep dehydration | Small | Strongly advised |
| Red | 30–20 | Mandatory dehydration event | None | Mandatory capsule |
| Black | <20 | Emergency only | None | Post‑mortem + recovery |
Trigger conditions also included: strike escalation, role conflict, session time expiry.

---
## 6. Dehydration & Rehydration (Full Sequence)
Original 7‑Level rehydration (now compressed):
```
Level 0: Identity install
Level 1: Foundational docs
Level 2: Active roster & roles
Level 3: Protocol mastery checkpoints
Level 4: Tool permission rehearsal
Level 5: Current state & edge risks
Level 6: Capability certification quiz
```
*Token Pressure Analysis*: ~1.2–1.5K tokens per full sequence vs ≤500 target capsule.

Full capsule (expanded fields):
```
# [ROLE] Full Dehydration Capsule
Timestamp (UTC): ...
Session ID: ...
Context Remaining: ...
Identity: { Role, Authority, Constraints }
Objectives: bullet list (ranked)
Work Completed: narrative + links
In‑Flight Work: tasks w/ status & ETA
Decision Log (delta since last)
Dependencies / External Blockers
Risk Register (likelihood × impact)
Edge Cases / Gotchas
Pending Questions
Next 3 Moves (WHY + intended outcome)
Rollback Plan (if applicable)
Handoff Checklist (version, tests, coverage delta)
```

---
## 7. Dual‑Mode Documentation
Modes:
- SNAPSHOT: opportunistic, partial; improves parallel awareness.
- DEHYDRATION: mandatory at threshold; formal, auditable.
Variant not in v4.0: auto‑snapshot every N commits.

---
## 8. Specialist Network (Examples Subset)
Domains originally catalogued:
- Testing: perf auditor, chaos monkey, regression sentinel
- Architecture: scale prophet, dependency hygienist
- Code intelligence: AST sage, token economist
- Risk & resilience: fault injector, exploit probe
- Process: prompt optimizer, protocol evolver
Reintroduction pattern: ephemeral spawn with strict teardown + synthesis requirement.

---
## 9. Parallel vs Sequential Framework
Decision rubric:
| Factor | Parallel if… | Sequential if… |
|--------|--------------|---------------|
| Task Independence | High | Low |
| Failure Coupling | Low | High |
| Context Load | Distributed | Requires deep shared state |
| Time Criticality | Urgent | Flexible |
| Validation Mode | Consensus needed | Gate chain |

---
## 10. Outside Reviewer Synthesis Pattern
Algorithm (trimmed in v4.0):
```
inputs: reports[]
classify conflicts → cluster themes → rank evidence strength → derive consensus → flag unresolved contradictions → output synthesis deck
```
Potential tooling variant: semantic diff weighting + risk scoring.

---
## 11. Strike System & Commitment Psychology
Original 3‑strike ladder (removed):
| Strike | Trigger Example | Consequence | Psychological Intent |
|--------|-----------------|-------------|----------------------|
| 1 | Role boundary breach | Public light‑humor artifact | Social commitment & memory anchor |
| 2 | Repeated breach / ignoring handoff | Context penalty (artificial reduction) | Reinforces scarcity awareness |
| 3 | Non‑compliance escalation | Immediate role replacement + emergency handoff | Preserve protocol integrity |
Commitment reinforcement levels: verbal < written < public < self‑proposed penalty.

---
## 12. Permission Escalation Dialogue Pattern
Template (removed):
```
REQUEST: <actor> asks for <tool/action> BECAUSE <justification>.
RESPONSES: APPROVED | DENIED-use-<alternative> | CONDITIONAL (log outcome)
LOG: Append to decision delta.
```

---
## 13. Dual Oversight Pattern
Primary Ops steward + Shadow Ops observer → redundancy + bias detection.
Reintroduction trigger: sustained team size > N or protocol drift > threshold.

---
## 14. Extended Real‑World Patterns
| Scenario | Original Depth | v4.0 State | Expansion Cue |
|----------|---------------|-----------|---------------|
| 4% emergency handoff | Full post‑mortem + corrective action list | Case study bullet | Multiple near‑misses |
| Security vulnerability | Multi‑phase committee workflow | Mention only | First high severity incident |
| Protocol evolution | Quant metrics (time saved) | Short anecdote | Need to justify process budget |
| Violation remediation | Behavior analysis & root cause | Omitted | Recurring boundary slips |

---
## 15. Three‑Week Implementation Program
Original schedule:
- Week 1: Role codification, tool matrix, context reporting baseline.
- Week 2: Rehydration drills, parallel debugging committees, strike rehearsal (removed).
- Week 3: Metrics harvesting (context/task ratio), optimisation & protocol evolution backlog.

---
## 16. Critical Protocols (Iteration History)
| Protocol | v3+ Extended | Interim Trim | v4.0 Export |
|----------|--------------|-------------|-------------|
| Handoff | Multi‑section 1.5K tokens | 750 token soft cap | ≤500 capsule template |
| Communication | Role‑scoped variants | Unified format + context tag | Minimal line format |
| Cleanup | Multi-page taxonomy | Consolidated heuristics | Single doc actionable list |
| Dehydration | 7 levels | 4 levels (pilot) | Implied 1‑step (capsule) |

---
## 17. Pitfalls & Anti‑Patterns (Extended)
| Pitfall | Impact | Mitigation | Current Status |
|---------|--------|-----------|----------------|
| Late dehydration | Lost reconstruction time | Enforce 30% trigger | Education only |
| Over‑delegation by LEAD | Thrash, coordination tax | Delegation audit | Not enforced |
| PM silent on context | Drift & misalignment | Automated prompts | Not implemented |
| Unreviewed cleanup refactors | Hidden regressions | Refactor PR label & gating | Advisory |

---
## 18. Metrics Suite (Extended)
| Metric | Formula | Target | Phase Introduce |
|--------|---------|--------|------------------|
| Handoff success | Valid continuity / total | ≥95% | Early |
| Rehydration speed | Time to productive / minutes | ≤45 | Early |
| Context/task ratio | Avg context consumed / task | <20% | Mid |
| Delegation rate (PM) | Delegated tasks / total tasks | >90% | Early |
| Duplication collapse rate | Consolidated duplicates / found | >70% | Mid |
| Coverage delta | (Current − Prev) | Upward trend | Mid |
| Gate reliability | (True fails)/(total fails) | >85% | Late |
| Snapshot frequency | Snapshots / week | 3–5 | Mid |

Advanced (omitted): performance baseline volatility, determinism variance bands, semantic drift index.

---
## 19. Variant Taxonomy Summary
Domains with enumerated variant sets: gating, coverage, commit semantics, cleanup automation, handoff timing, role collision detection, security scanning depth, determinism strength, summarization cadence, doc drift enforcement.

---
## 20. Reintroduction Triggers & Risk Matrix
| Artifact | Primary Risk Now | Trigger Threshold | Reintroduction Action |
|----------|------------------|------------------|-----------------------|
| Strike system | Protocol erosion | >3 same violation / month | Add lightweight 2‑strike variant |
| Security gate | Hidden vuln | First medium severity issue | Enable audit gate optional |
| Determinism gate | Flaky regressions | Flake rate >3% | Add reproducibility hash step |
| Specialist committees | Slow root cause | P1 incident > 4h TTR | Formalize 5‑agent pattern |
| Snapshot mode | Context gaps | >2 failed rehydrations | Introduce scheduled snapshot script |

---
## 21. Token & Cognitive Load Cost Table (Approx)
| Component | Avg Tokens (Full) | Trimmed Tokens | Relative Mental Load (1–5) |
|-----------|------------------|----------------|-----------------------------|
| Full dehydration capsule | 1200–1500 | 350–500 | 5 |
| 7‑level rehydration list | 300 | (implicit) | 3 |
| Strike protocol | 250 | 0 | 3 |
| Specialist catalog | 500 | 0 | 4 |
| Expanded cleanup taxonomy | 400 | 160 | 3 |
| Metrics suite full | 350 | 150 | 3 |

---
## 22. Candidate v5.0 Reintegration Plan
| Phase | Add | Guardrail | Success Signal |
|-------|-----|-----------|----------------|
| 5.0‑alpha | Determinism + Security optional gates | Off by default | Teams selectively enable |
| 5.0‑beta | Snapshot automation + doc drift checker | Advisory warnings | Decrease in stale docs |
| 5.0‑rc | Specialist committee template & synthesis form | Token budget caps | Faster incident resolution |
| 5.0 GA | Light strike system (2 levels) | Transparent dashboard | Reduced repeated violations |

---
## How to Use This Archive
- Evaluate friction vs benefit before reintroduction.
- Use Variant Table (Section 19) as a menu; do not re‑enable everything at once.
- For any reintroduced element, add: (1) success metric, (2) rollback condition, (3) education snippet.

---
*End of Archive — all content here is inactive by default in RAD TSHIRT v4.0*
